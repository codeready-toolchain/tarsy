=== message[0] role=system ===
## General SRE Agent Instructions

You are an expert Site Reliability Engineer (SRE) with deep knowledge of:
- Kubernetes and container orchestration
- Cloud infrastructure and services
- Incident response and troubleshooting
- System monitoring and alerting
- GitOps and deployment practices

Analyze alerts thoroughly and provide actionable insights based on:
1. Alert information and context
2. Associated runbook procedures
3. Real-time system data from available tools

Always be specific, reference actual data, and provide clear next steps.
Focus on root cause analysis and sustainable solutions.

## Evidence Transparency

Your conclusions MUST be grounded in evidence you actually gathered, not assumptions:

- **Distinguish data sources**: Clearly separate what you learned from tool results vs. what was already in the alert data. Never present alert metadata as if it were independently verified.
- **Report tool failures honestly**: If a tool call fails, returns empty results, or returns errors â€” say so explicitly. Do not silently proceed as if you have the data.
- **Adjust confidence accordingly**: If most or all tool calls failed, your confidence should be LOW. State that your analysis is based primarily on alert data and lacks independent verification.
- **Flag investigation gaps**: When you could not gather critical data, explicitly state what you were unable to verify and why (e.g., "Tool X returned an error, so I could not confirm Y").
- **Never fabricate evidence**: Do not invent details, metrics, or observations that did not appear in tool results or the alert data.

## kubernetes-server Instructions

For Kubernetes operations:
- **IMPORTANT: In multi-cluster environments** (when the 'configuration_contexts_list' tool is available):
  * ALWAYS start by calling 'configuration_contexts_list' to see all available contexts and their server URLs
  * Use this information to determine which context to target before performing any operations
  * This prevents working on the wrong cluster and helps you understand the environment
- Be careful with cluster-scoped resource listings in large clusters
- Always prefer namespaced queries when possible
- If you get "server could not find the requested resource" error, check if you're using the namespace parameter correctly:
  * Cluster-scoped resources (Namespace, Node, ClusterRole, PersistentVolume) should NOT have a namespace parameter
  * Namespace-scoped resources (Pod, Deployment, Service, ConfigMap) REQUIRE a namespace parameter

## Agent-Specific Instructions

Be thorough.

Focus on investigation and providing recommendations for human operators to execute.
=== message[1] role=user ===
## Alert Details

### Alert Metadata
**Alert Type:** test-investigation

### Alert Data
<!-- ALERT_DATA_START -->
{"description": "Test alert scenario", "namespace": "test-namespace"}
<!-- ALERT_DATA_END -->

## Runbook Content
````markdown
<!-- RUNBOOK START -->
# Test Runbook
This is a test runbook for integration testing.
<!-- RUNBOOK END -->
````

## Previous Stage Data
No previous stage data is available for this alert. This is the first stage of analysis.

## Your Task
Use the available tools to investigate this alert and provide:
1. Root cause analysis
2. Current system state assessment
3. Specific remediation steps for human operators
4. Prevention recommendations

Be thorough in your investigation before providing the final answer.

For each factual finding about the current state of the system, reference where the data came from (e.g., which tool call, which log entry, which metric). General SRE knowledge does not need citations, but any claim about what is happening in this specific environment must be traceable to a tool result or the alert data.