defaults:
  llm_provider: "test-provider"
  llm_backend: "google-native"

mcp_servers:
  test-mcp:
    transport:
      type: stdio
      command: mock
    summarization:
      enabled: true
      size_threshold_tokens: 100
  prometheus-mcp:
    transport:
      type: stdio
      command: mock
    summarization:
      enabled: true
      size_threshold_tokens: 100
  # Dummy entry so built-in agents (KubernetesAgent, etc.) pass validation.
  kubernetes-server:
    transport:
      type: stdio
      command: mock

agents:
  DataCollector:
    mcp_servers: [test-mcp, prometheus-mcp]
    custom_instructions: "You are DataCollector, gathering system metrics and pod status."
  Remediator:
    mcp_servers: [test-mcp, prometheus-mcp]
    custom_instructions: "You are Remediator, analyzing logs and recommending fixes."
  ConfigValidator:
    mcp_servers: [test-mcp]
    custom_instructions: "You are ConfigValidator, verifying resource configurations."
  MetricsValidator:
    max_iterations: 1  # Triggers forced conclusion after 1 iteration (tool call)
    mcp_servers: [prometheus-mcp]
    custom_instructions: "You are MetricsValidator, checking SLO compliance."
  ScalingReviewer:
    mcp_servers: [test-mcp]
    custom_instructions: "You are ScalingReviewer, evaluating horizontal scaling recommendations."

agent_chains:
  test-chain:
    alert_types: [test-alert]
    llm_provider: "test-provider"
    executive_summary_provider: "test-provider-fast"
    llm_backend: "google-native"
    chat:
      enabled: true
      agent: "ChatAgent"
      llm_backend: "google-native"
    stages:
      - name: investigation
        agents:
          - name: DataCollector
      - name: remediation
        agents:
          - name: Remediator
            llm_backend: "langchain"
      - name: validation
        success_policy: all
        agents:
          - name: ConfigValidator
            llm_backend: "langchain"
          - name: MetricsValidator
        synthesis:
          llm_provider: "test-provider"
          llm_backend: "google-native"
      - name: scaling-review
        replicas: 2
        agents:
          - name: ScalingReviewer
        synthesis:
          llm_provider: "test-provider-fast"
          llm_backend: "langchain"
